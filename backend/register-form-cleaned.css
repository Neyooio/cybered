/* ========================================
   CSS Variables
   ======================================== */
:root {
  --bg-from: #0c4a6e;
  --bg-via: #1e3a8a;
  --bg-to: #312e81;
  --panel: #1d4ed8;
  --panel-2: #1542c7;
  --border: #000;
  --text: #fff;
  --muted: #cbd5e1;
  --accent: #ef4444;
  --dark-red: #8b0000;
  --yellow: #fbbf24;
  --orange-400: #fb923c;
  --btn-blue-top: #0f1f52;
  --btn-blue-bot: #0a1540;
  --btn-red-top: #d62839;
  --btn-red-bot: #9b111e;
  --btn-red-hover: #6e0f0f;
  --blur-amt: 8px;
}

/* ========================================
   Base Layout & Background
   ======================================== */
html,
body {
  height: 100%;
  overflow: hidden !important;
  overscroll-behavior: none;
}

body {
  background: radial-gradient(1100px 540px at 50% 18%, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0) 60%),
    linear-gradient(180deg, #1c3fa9 0%, #1db3d7 44%, #6b55e7 100%);
  background-repeat: no-repeat;
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  margin: 0;
  color: var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

/* Spotlight vignette effect */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 5;
  --spot-x: 50%;
  --spot-y: 50%;
  --spot-r: clamp(450px, 70vmin, 980px);
  --edge-soft: 72px;
  --outside: #0b1131;
  background: radial-gradient(
    circle at var(--spot-x) var(--spot-y),
    transparent calc(var(--spot-r) - var(--edge-soft)),
    rgba(11, 17, 49, 0.28) var(--spot-r),
    var(--outside) 120vmax
  );
}

/* Skyline background image */
.bg-skyline {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  background: bottom center / clamp(1200px, 125vw, 2200px) auto no-repeat url("../../assets/images/Bshadows.png");
  opacity: 0.95;
}

/* ========================================
   Utility Classes
   ======================================== */
.hidden {
  display: none !important;
}

.blur-lg {
  filter: blur(8px);
  transition: filter 0.35s ease;
}

.blur-md {
  filter: blur(var(--blur-amt));
  transition: filter 0.25s ease;
}

.pointer-events-none {
  pointer-events: none;
}

.pointer-events-auto {
  pointer-events: auto !important;
}

.accent {
  color: var(--accent);
  font-weight: 800;
}

.clr-dark-red {
  color: var(--dark-red);
  font-weight: 800;
}

body.page-exit {
  opacity: 0;
  transform: scale(0.985);
  transition: opacity 0.32s ease, transform 0.32s ease;
}

/* ========================================
   Notification Toast
   ======================================== */
.notify {
  position: fixed;
  left: 50%;
  top: 16px;
  transform: translateX(-50%) translateY(-12px);
  min-width: 280px;
  max-width: min(92vw, 560px);
  padding: 12px 16px;
  border-radius: 12px;
  border: 2px solid #0a163f;
  background: rgba(11, 26, 77, 0.95);
  color: #fff;
  z-index: 100;
  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.35);
  font-weight: 700;
  text-align: center;
  opacity: 0;
  transition: opacity 0.2s ease, transform 0.2s ease;
}

.notify.show {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

.notify.success {
  border-color: #16a34a;
  box-shadow: 0 12px 28px rgba(22, 163, 74, 0.35);
}

.notify.error {
  border-color: #dc2626;
  box-shadow: 0 12px 28px rgba(220, 38, 38, 0.35);
}

.notify.info {
  border-color: #2563eb;
  box-shadow: 0 12px 28px rgba(37, 99, 235, 0.35);
}

/* ========================================
   Intro Overlay
   ======================================== */
.intro-overlay {
  position: fixed;
  inset: 0;
  z-index: 60;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-end;
}

.intro-overlay.fade-out {
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 0.35s ease, transform 0.35s ease;
}

.intro-backdrop {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.intro-backdrop::before {
  content: "";
  display: block;
  width: min(70vmin, 680px);
  height: min(70vmin, 680px);
  margin: 8vh auto 0;
  border-radius: 9999px;
  background: radial-gradient(circle at 50% 35%, #60a5fa55, #60a5fa22 45%, transparent 70%);
  filter: blur(30px);
}

/* ========================================
   Dialogue Box (kept visible and functional)
   ======================================== */
.dialogue-box {
  width: min(95vw, 960px);
  margin: 0 0 clamp(16px, 4vw, 24px) 0;
  background: linear-gradient(180deg, var(--panel), #2150db);
  border-radius: clamp(12px, 2.5vw, 16px);
  border: clamp(3px, 0.6vw, 4px) solid var(--border);
  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.35);
  padding: clamp(14px, 3vw, 18px) clamp(16px, 3.5vw, 20px);
  cursor: pointer;
  user-select: none;
}

.dialogue-inner {
  display: flex;
  align-items: center;
  gap: clamp(12px, 3vw, 16px);
}

.dialogue-body {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: space-between;
  min-height: clamp(80px, 12vh, 140px);
  gap: 6px;
  min-width: 0;
}

.dialogue-avatar {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100px;
  min-width: clamp(80px, 16vw, 100px);
  height: auto;
  overflow: visible;
  border-radius: 15px;
}

.dialogue-avatar-img {
  width: 100px;
  height: 100px;
  object-fit: cover;
  border-radius: 15px;
  background-color: transparent;
  border: 2px solid var(--border);
  transform: scaleX(-1) scale(1) translateY(10px);
  overflow: hidden;
}

.dialogue-name {
  margin-top: clamp(4px, 1vw, 8px);
  font-weight: 800;
  color: var(--dark-red);
  font-size: clamp(12px, 2.5vw, 14px);
}

.dialogue-text {
  width: 100%;
  margin: 0;
  font-size: clamp(15px, 3.5vw, 22px);
  line-height: 1.45;
  font-weight: 600;
  text-align: left;
  text-wrap: pretty;
}

.dialogue-continue {
  align-self: flex-end;
  margin-top: clamp(6px, 1.5vw, 8px);
  font-size: clamp(11px, 2vw, 14px);
  opacity: 0.6;
  font-style: italic;
  display: inline-flex;
  align-items: center;
  gap: clamp(6px, 1.5vw, 8px);
  color: rgba(255, 255, 255, 0.6) !important;
  animation: pulse 1.6s ease-in-out infinite !important;
}

.dialogue-continue .dot {
  width: clamp(6px, 1.5vw, 8px);
  height: clamp(6px, 1.5vw, 8px);
  background: #fff;
  border-radius: 50%;
  animation: none !important;
}
